{% extends 'base.html' %}

{% block title %}
    blogger - {{post.tab_name}}
{% endblock %}

{% block content %}
<h1>{{post.title}}</h1>

{% if user.is_authenticated%}
    {% if user.id == post.author.id %}
    <a href="{% url 'edit-post' post.pk %}">Edit</a>
    <a href="{% url 'delete-post' post.pk %}">Delete</a>
    {% endif %}
{% endif %}

<small>by {{post.author}}</small>
<p>{{post.created}}</p>
<p>{{post.category}}</p>
<p>{{post.body|safe}}</p>

<a href="{% url 'home' %}" class="btn btn-secondary">go back</a>
<br></br>
<hr></gr>

<form action="{% url 'like-post' post.pk%}" method="POST">
    {% csrf_token %}
    {% if user.is_authenticated%}
        {% if isLiked %}
            <button class="btn btn-sm btn-danger" type="submit" name="post_id_btn_value" value="{{post.id}}">Unlike</button>
        {%else%}
            <button class="btn btn-sm btn-primary" type="submit" name="post_id_btn_value" value="{{post.id}}">Like</button>
        {%endif%}
    {%else%}
        <a class="nav-link" href="{% url 'login' %}">Login</a> to put a like
    {%endif%}

     - <p>{{total_likes}} Likes</p>
</form>

{% endblock %}