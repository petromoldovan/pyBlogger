{% extends 'base.html' %}

{% block title %}
    blogger - {{post.tab_name}}
{% endblock %}

{% block content %}
<h1>{{post.title}}</h1>

{% if user.is_authenticated%}
    {% if user.id == post.author.id %}
    <a href="{% url 'edit-post' post.pk %}">Edit</a>
    <a href="{% url 'delete-post' post.pk %}">Delete</a>
    {% endif %}
{% endif %}

<small>by {{post.author}}</small>
<p>{{post.created}}</p>
<p>{{post.category}}</p>

{%if post.header_image%}
<img src="{{post.header_image.url}}" />
{%endif%}


<p>{{post.body|safe}}</p>

<a href="{% url 'home' %}" class="btn btn-secondary">go back</a>
<br></br>
<hr></gr>

<form action="{% url 'like-post' post.pk%}" method="POST">
    {% csrf_token %}
    {% if user.is_authenticated%}
        {% if isLiked %}
            <button class="btn btn-sm btn-danger" type="submit" name="post_id_btn_value" value="{{post.id}}">Unlike</button>
        {%else%}
            <button class="btn btn-sm btn-primary" type="submit" name="post_id_btn_value" value="{{post.id}}">Like</button>
        {%endif%}
    {%else%}
        <a class="nav-link" href="{% url 'login' %}">Login</a> to put a like
    {%endif%}

     - <p>{{total_likes}} Likes</p>
</form>

<br>


<div class="card mb-3">
  <div class="row g-0">
    <div class="col-md-2">
        {% if post.author.profile.avatar %}
        <img src="{{post.author.profile.avatar.url}}" class="rounded-circle card-img"  />
        {%endif%}
    </div>
    <div class="col-md-10">
      <div class="card-body">
        <h5 class="card-title">{{post.author.first_name}} {{post.author.last_name}}</h5>
          <p class="small text-muted">
              {% if post.author.profile.fb_url %}
                <a href="{{post.author.profile.fb_url}}" >Facebook</a> |
              {%endif%}
              {% if post.author.profile.linked_url %}
                <a href="{{post.author.profile.linked_url}}" >LinkedIn</a> |
              {%endif%}
          </p>
        <p class="card-text">{{post.author.profile.bio}}</p>
      </div>
    </div>
  </div>
</div>





{% endblock %}